# /etc/skel/.bashrc

# Important constants
AUTOTEST_DIR="$HOME/trunk/src/third_party/autotest/files"
TAST_DIR="$HOME/trunk/src/platform/tast"
TAST_TESTS_DIR="$HOME/trunk/src/platform/tast-tests"
DUT_IP="gredelston-host2.bld"
BOARD="coral"

# Go-links
alias goautotest="cd $AUTOTEST_DIR"
alias autotestgo="goautotest"
alias gofaft="goautotest"
alias faftgo="goautotest"
alias gotast="cd $TAST_DIR"
alias tastgo="gotast"
alias gotast-tests="cd $TAST_TESTS_DIR"

# Testing aliases
alias faft="sudo test_that --board=$BOARD --autotest_dir $AUTOTEST_DIR $DUT_IP"
alias test_faft="faft firmware_FAFTSetup"
alias runservo="sudo servod --board=$BOARD"

# Find a repo
REPO_ROOT="$HOME/trunk"
find_repo() {
	echo $REPO_ROOT/$(grep -Rn $1 $REPO_ROOT/.repo/manifests/external_full.xml $REPO_ROOT/.repo/manifests/internal_full.xml | grep path | sed -E 's/.*path=\"([^"]+)\"/\1/')
}
goto_repo() {
	cd $(find_repo $1)
}
alias goto="goto_repo"

# Text-based adventures will be the end of me
alias runto="goto"
alias where="pwd"

# Fix that command prompt
export PS1="(cr) $PS1"

# Golang
export GOPATH="/usr/lib/gopath"
