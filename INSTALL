#!/bin/bash
cd $HOME
DOTFILES_DIR='$HOME/.dotfiles'

# .bashrc
MY_BASHRC='$HOME/.bashrc'
echo "Sourcing ~/.dotfiles/.bashrc"
echo "" >> $MY_BASHRC
echo "# Import my standard .bashrc" >> $MY_BASHRC
echo "export DOTFILES=\"\$HOME/.dotfiles\"" >> $MY_BASHRC
echo "source \$DOTFILES/.bashrc" >> $MY_BASHRC

# .tmux.conf
MY_TMUX_CONF='$HOME/.tmux.conf'
if [ -f $MY_TMUX_CONF ]
then
	echo "$MY_TMUX_CONF already exists. Skipping $MY_TMUX_CONF"
else
	echo "Symlinking $MY_TMUX_CONF"
	ln $HOME/.dotfiles/.tmux.conf $MY_TMUX_CONF
fi

# .vimrc
MY_VIMRC='$HOME/.vimrc'
if [ -f $MY_VIMRC ]
then
	echo "$MY_VIMRC already exists. Appending 'source .dotfiles/.vimrc'"
	echo "source \$HOME/.dotfiles/.vimrc" >> $MY_VIMRC
else
	echo "Symlinking ~/.vimrc"
	ln $HOME/.dotfiles/.vimrc $MY_VIMRC
fi

# .cros_sdk_bashrc
# Only include if --cros_sdk was provided
if [[ "$*" == "--cros_sdk" ]]
then
	echo "Detected --cros_sdk flag. Sourcing ~/.dotfiles/.cros_sdk_bashrc"
	echo "" >> $MY_BASHRC
	echo "# Import my cros_sdk .bashrc" >> $MY_BASHRC
	echo "source \$DOTFILES/.cros_sdk_bashrc" >> $MY_BASHRC
else
	echo "Did not detect --cros_sdk flag. Skipping ~/.dotfiles/.cros_sdk_bashrc"
fi
